ROOM: $smelter


DESCRIPTION: 
A blast of smoke and heat greets you as you walk out of the passage and into the room. The roaring fire draws your attention to the far wall, where scores of orcs shovel coal into a giant furnace and tilt huge kettles of molten steel into white-hot rivers. This is the smelter.


[[CODE]]
if (justCameFrom(w, "war_forge")) { 
  s.add("""You see a smooth passage leading out of the smelter and sloping upwards. You'll be able to go there unnoticed.""", wholeSentence: true);
}
[[/CODE]]
[[CODE]]
if (justCameFrom(w, "guardpost_above_church")) { 
  s.add("""Not far from here there is a short tunnel, sloping down. It leads into the same room as the molten steel — the war forges. You'll be able to go there unnoticed.""", wholeSentence: true);
}
[[/CODE]]




SHORT_DESCRIPTION: 
The reds and whites of the molten steel reflect in the heaps of coal.


[[CODE]]
rollBrianaQuote(w, s);
[[/CODE]]


EXITS:
$war_forge (Go to the war forges): You walk through a short passage set in stone, towards the sound of hundreds of anvils.


$guardpost_above_church (Go through the smooth passage): You take the smooth passage and it leads you slightly upwards.




// ---------------------


ACTION: $smelter_look_around
COMMAND: Look around


FOR_LOCATION: $smelter


PREREQUISITES:
!w.actionHasBeenPerformed(name)


COMPLETE_SUCCESS_PROBABILITY: 100%


COMPLETE_SUCCESS_DESCRIPTION:
The artificial rivers lead the molten iron across the room, into a large pool. From that pool, a single ogre is distributing the forge-ready liquid into troughs that lead to the war forges below. 


The ogre is no more than a spear's throw away from you. But he doesn't notice. In fact, you realize he's blind, probably from all the molten steel around him. Yet he's performing his job without fault, listening to commands from the war forges beyond the wall, and operating the  floodgates accordingly.


// ---------------------


ACTION: $smelter_throw_spear
COMMAND: Throw spear at the ogre


FOR_LOCATION: $smelter


PREREQUISITES:
!w.actionHasBeenPerformed(name)
&&
w.actionHasBeenPerformed("war_forge_watch_workers") 
&&
w.actionHasBeenPerformed("smelter_look_around") 
&&
getPlayer(w).hasItem(ItemType.spear)


COMPLETE_SUCCESS_PROBABILITY: 100%


COMPLETE_SUCCESS_DESCRIPTION:
TODO - throwing spear at the orc that holds the molten steel gate


Why would you do that? You just wasted a perfectly good spear on a stupid ogre that posed no threat to us.


Watch.


TODO (molten steel ruins everything)


The less simple you see the world, the easier it is for you to change it. 


You got lucky. 


That was some throw! That thing downstairs.. I don't know what it is but I would not want to meet it in battle. - it is probably meant to scale castle walls. - so, fort ironcast. One well placed spear may have prevented the fall of Ironcast. - delayed. - what? - we delayed the fall of the fort, at best. 




SUCCESS_EFFECT:
removeSpearFromPlayer(w);